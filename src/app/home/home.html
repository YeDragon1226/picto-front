<div class="announcement-wrapper">
  <div class="top-bar">
    <h2>Announcements</h2>
  </div>

  @if (showNewForm) {
  <div class="form-box">
    <input [(ngModel)]="newTitle" placeholder="Title" class="input" />
    <textarea [(ngModel)]="newMessage" placeholder="Message" class="textarea"></textarea>

    <div class="picker">
      <input [(ngModel)]="newDate" type="date" class="input" />
      <select [(ngModel)]="newCategory" class="select">
        <option value="">Select Category</option>
        <option value="General">General</option>
        <option value="Urgent">Urgent</option>
        <option value="Update">Update</option>
      </select>
    </div>

    <div class="form-footer">
      <div class="pin-toggle">
        <input type="checkbox" id="pin" [(ngModel)]="isPinned" />
        <label for="pin">Pin this Announcement</label>
      </div>
      <div class="btn">
        <button class="post-btn" (click)="addAnnouncement()">
          <i class="fas fa-paper-plane"></i>
        </button>
        <button class="cancel-btn" (click)="showNewForm = false">
          <i class="fas fa-ban"></i>
        </button>
      </div>
    </div>
  </div>
  }

  @if (!showNewForm) {
    <div class="filter-bar">
      <input [(ngModel)]="searchTerm" placeholder="Search announcements..." class="input" />
      <select [(ngModel)]="selectedCategory" class="select">
        <option value="">All Categories</option>
        <option value="General">General</option>
        <option value="Urgent">Urgent</option>
        <option value="Update">Update</option>
      </select>
      <div class="widget">
        <span class="label">Today :</span>
        <span class="value">{{ today }}</span>
      </div>
    </div>

    <div class="card-container">
      @for (a of filteredAnnouncements; track a) {
        <div class="card">
          <div class="card-header">
            <h3>
              {{ a.title }}
              @if (a.pinned) {
                <span title="Pinned">ðŸ“Œ</span>
              }
            </h3>
          </div>
          <p>{{ a.message }}</p>
          <small>{{ a.date }} â€” <i>{{ a.category }}</i></small>
        </div>
      }

      <div class="card add-announcement-card" (click)="showNewForm = true">
        <div class="add-icon">+</div>
        <div class="add-label">Add Announcement</div>
      </div>
    </div>
  }
</div>
